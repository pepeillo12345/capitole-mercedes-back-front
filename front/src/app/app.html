
<div class="m-12">
  <app-page-header>
    <p-select
      [options]="topics"
      placeholder="Select a topic"
      optionLabel="label"
      optionValue="value"
      [(ngModel)]="selectedTopic"
      (onChange)="onTopicChange($event.value)"
      class="w-full md:w-56 ml-auto"
    />
  </app-page-header>

  <app-data-table
    #dataTable
    [config]="{ entityName: selectedTopic() }"
    [columns]="currentColumns()"
    [queryFn]="getQueryFn(selectedTopic())">
    <ng-template #bodyTemplate let-row>
      <tr>
        @for (col of currentColumns(); track col.field) {
          <td class="p-3">
            @switch (col.pipe) {
              @case ('date') {
                {{ row[col.field] | date:'short' }}
              }
              @default {
                {{ row[col.field] }}
              }
            }
          </td>
        }
      </tr>
    </ng-template>
  </app-data-table>
</div>
